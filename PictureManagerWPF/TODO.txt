#Bugs
- pri otoceni obrazku se neprenacte nahled, musi se znovu nacist slozka
  (neni to tim ze se dela ReloadThumbnail v jinem vlakne? => neni)
- zamrznuti pri mazani videa, kdyz se zrovna prehrava (nevim co s tim)
- MediaElement: if SpeedRatio is > 2, Pause()/Play() will cause ignoring SpeedRatio and plays on SpeedRatio = 1
- disky identifikovat podle ID a ne podle pismena
- Clips: 
    - kdyz klip konci az ke konci videa, tak se nekolikrat opakuje a pak zamrzne prehravac a je to na restart appky (do OnMediaEnded se to nedostane)
    - ulozeni v klipech nezmeni modifed v main toolbaru
    - RadioButtons default value and IsChecked binding
- DB
  - presun souboru vygeneruje jen jednu zmenu v db
- D:\!test\364__32_original.jpg nejde ulozit metadata, nebo crop
- TreeViewCategories:
  - drag&drop se chova divne, kdyz zobrazim context menu a pak kliknu na jinej item
  - height change on StatusBar Visibility
- kdyz ma obrazek metadata jen v DB, tak se rotace neaplikuje na vytvoreni thumbnail
- SegmentRectsControl resize on slide panel IsPinned changed
- ThumbsGrid:
  - drag scroll bar doesn't work after selecting any image. it works only after load
- CatTreeView search => show tool tip on full row


#Update
- pri overovani existence souboru pri nacitani, overovat pred FileInfo a zaroven doplnovat MediaItem o file size, ... do nullable props
- IsMarked & PicCount: mozna by stacilo mit jen PicCount
- zrusit tabstop tam kde to nema smysl, jako treba status bar, clips slide panel, ...
    - nebo nastavit FocusVisualStyle na null
- check strings Equals and decide which StringComparison use
- GetPerceptualHash a GetAvgHash ma podobnej kod, mozna bych to pouzil i jinde az po CopyPixels
- odstranit na MediaItem Uri, nacitani udelat jako SetPicture v Segment??
- CatTreeView:
  - ScrollTo without ScrollToBottom
  - ScrollTo new item only if not in the view
  - horizontal scroll bar
- static delegates
- DB:
  - remove direct access to Helper.IsModified
  - should I use private fields in FromCsv and LinkReferences to avoid calling OnPropertyChanged?
- remove Folder Browser
- can classes like Folders, Keywords, MediaItems, ... be static if there is always just one instance???
- Rethink hierarchical keywords moving
- MainTabs: change adding tabs in a way that parameters can be passed to constructor
- Viewers:
  - pass data in constructor to ViewerV
  - methods CanSeePerson, CanSeeKeyword for TreeViewSearch and elsewhere
- MarkUsedKeywordsAndPeople:
  - add People and Keywords from Segments
- Filters
  - update DisplayFilter on items on MainTabs tab change


# Segment Matching
 - Bugs:
   - SegmentControl ToolTip: kdyz je person name delsi nez image => segment rect je mimo (nevim co s tim)
     mozna to samy jak jsem pouzil asi na PersonEditControl ale se sloupcema. udelat 3 sloupce (*, auto, *)
   - reload PersonControl and Drawer when Segment rect is deleted
 - Updates:
   - confirmed segments reload is slow when it has to much columns (9)
   - remove DisplayKeywords from Person and use Keywords.GetAllKeywords
   - show "select as same person" only if different peopleIds are selected
 - New:
   - keywords:
     - sort like in the tree
     - disable/enable available
   - count of segments on person

#New
- na prehravani panoramat zmensit obrazek na vysku obrazovky <= je to nekvalitni :(
- zmensovat hodne velky obrazky pri prohlizeni <= je to nekvalitni :(
- vymyslet to tak, aby zustali thumbs selected i kdyz se prepne do viewera a listuje se v nem
    pozor!! kdyz bych ve vieweru editoval/mazal/..., tak bych to aplikoval na selected!!!
- prochazet ve fullscreenu selected, abych si moch oznacit treba dva a prepinat se mezi nima (pozor, delete je za selected)
- pridat k rotate taky flip H a V
- kdyz se nepodari ulozit metadata do obrazku, tak zaznamenat k MediaItemu, ze jsou metadata pouze v DB a obrazek nijak neupravovat
- filter na delku videa
- v nahledech na videa neustale prehravat video vytvoreny ze screenshotu toho videa ve velikosti nahledu, takze to snad 
  nebude narocny a bude se to moc prehravat porad a kdyz se na nahled najede mysi tak se pude prehravat puvodni video
- umoznit zmenit nahled u videa
- CatTreeView
  - TODO GeoNames, user name dat do prop na GeoNames, user name checkovat OnBeforeItemCreate, menuitem GeoNameNewCommand udelat obecne
  - vymyslet jinej nazev pro PicCount a ICatTreeViewTagItem
  - ItemCreate na People a Keywords je skoro stejny
  - Interfaces ICatTreeRoot, ICatTreeBranch ICatTreeLeaf
- Clips: akce na (ukoncit clip -> presun na dalsi snimek -> zacit novy clip)
         lock na volume a speed, aby se ignorovalo to co je u clipu
         - import/export
         - metadata (keywords, people, rating, comment) on file and/or Clip
         - export to mp4 (FFMPEG)
- Videa:
    - po 3 vterinach taky skryt status bar a nastavit top bar na opacity 0
- nova kategorie "keywords groups" kde budou kombinace keywords, people, ... ktery se vyskytujou na jednom MediaItem
- Log to file
- Folders a Folder GetByPath udelat univerzalni pro CatTreeView
- statickou tridu Prefs v App, ktera bude odkazovat na Settings.Default, takze se bude psat App.Prefs.FfmpegPath
- ThumbnailsGrid:
  - ThumbSize for each TG
  - Auto groups from People and Keywords
  - Show Folders with images from 4 sub folders, number of files (info only from cache with refresh on expand)
- Workspace:
  - Rename Viewers to Workspaces
- View in Tabs for each Category in TreeView
- DB:
  - save in user profile
  - new table for MediaItems hashes for comparison
  - changes counter: if count is > 999 format as 1,x
    - ToolTip with number of changes of each table
  - keep list of modified, make MediaItems implementation universal
- VirtualizingWrapPanel:
  - find item for scroll to with combination group|items
  - filter or group by GroupItems
    - list of GroupItems (folder, date, keyword, person, rating, geoName, ...) with link to items
    - not all GroupItems have to be active from the first load
  - group is expander
  - try to not scroll to top on reload
- MessageDialog:
  - Extend
- IListBoxItem as ancestor of ICatTreeViewItem



#Shortcuts:
- ALT+S => Split video clip (create new video clip or finish selected without TimeEnd)
