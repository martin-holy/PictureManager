<ResourceDictionary
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:pm="clr-namespace:PictureManager"
  xmlns:dv="clr-namespace:PictureManager.Domain.DataViews;assembly=PictureManager.Domain"
  xmlns:pmdm="clr-namespace:PictureManager.Domain.Models;assembly=PictureManager.Domain">

  <DataTemplate x:Key="Views.MainMenu">
    <DataTemplate.Resources>
      <Style TargetType="{x:Type Path}" BasedOn="{StaticResource MH.Styles.Icon}">
        <Setter Property="Effect" Value="{StaticResource MH.Effects.DropShadow}"/>
      </Style>
    </DataTemplate.Resources>

    <Menu Background="Transparent" DataContext="{Binding Source={x:Static pm:App.Core}}">
      <MenuItem
        Padding="0"
        Background="Transparent"
        Height="30"
        Width="30">
        
        <MenuItem.Icon>
          <Path Data="{StaticResource IconThreeBars}" Margin="2 0 0 0"/>
        </MenuItem.Icon>

        <!-- Tools -->
        <MenuItem Header="Tools">
          <MenuItem Header="Settings" Command="{Binding MainWindowM.OpenSettingsCommand}">
            <MenuItem.Icon>
              <Path Data="{StaticResource IconSettings}"/>
            </MenuItem.Icon>
          </MenuItem>
          <MenuItem Header="GeoNames" Command="{Binding ImagesM.AddGeoNamesFromFilesCommand}">
            <MenuItem.Icon>
              <Path Data="{StaticResource IconLocationCheckin}"/>
            </MenuItem.Icon>
          </MenuItem>
          <MenuItem Header="Test Button" Command="{Binding TestButtonCommand, Source={x:Static pm:App.Ui}}"/>
        </MenuItem>

        <!-- Media Items -->
        <MenuItem Header="Media Items">
          <MenuItem Header="Compress" Command="{Binding ImagesM.CompressCommand}"/>
          <MenuItem Header="Rebuild Thumbnails" Command="{Binding MediaItemsM.RebuildThumbnailsCommand}"/>
          <MenuItem Header="Rebuild Video Clips Thumbnails" Command="{Binding VideoClipsM.RebuildVideoClipsThumbnailsCommand, Source={x:Static pm:App.Core}}"/>
          <MenuItem Header="Rotate" InputGestureText="Ctrl+R" Command="{Binding MediaItemsM.RotateCommand}"/>
          <MenuItem Header="Shuffle" Command="{Binding MediaItemsViews.ShuffleCommand}"/>
          <MenuItem Header="Resize Images" Command="{Binding ImagesM.ResizeImagesCommand}"/>
          <MenuItem Header="Images to Video" Command="{Binding ImagesM.ImagesToVideoCommand}" CommandParameter="{Binding MediaItemsViews.Current}"/>
          <MenuItem Header="Copy Paths" Command="{Binding MediaItemsViews.CopyPathsCommand}"/>
          <MenuItem Header="Rename" InputGestureText="F2" Command="{Binding MediaItemsM.RenameCommand}"/>
          <MenuItem Header="Segments" Command="dv:SegmentsView.OpenCommand">
            <MenuItem.Icon>
              <Path Data="{StaticResource IconEquals}"/>
            </MenuItem.Icon>
          </MenuItem>
        </MenuItem>

        <!-- Metadata -->
        <MenuItem Header="Metadata">
          <MenuItem
            Header="{Binding MediaItemsM.ModifiedItemsCount}"
            HeaderStringFormat="Show {0} modified"
            Command="{Binding MediaItemsM.ViewModifiedCommand}">
            <MenuItem.Icon>
              <Path Data="{StaticResource IconImageMultiple}"/>
            </MenuItem.Icon>
          </MenuItem>
          <MenuItem Header="Save to files" Command="{Binding ImagesM.SaveToFilesCommand}">
            <MenuItem.Icon>
              <Path Data="{StaticResource IconSave}"/>
            </MenuItem.Icon>
          </MenuItem>
          <MenuItem Header="Comment" InputGestureText="Ctrl+K" Command="{Binding MediaItemsM.CommentCommand}">
            <MenuItem.Icon>
              <Path Data="{StaticResource IconNotification}"/>
            </MenuItem.Icon>
          </MenuItem>
          <MenuItem Header="Reload" Command="{Binding MediaItemsM.ReloadMetadataCommand}"/>
        </MenuItem>

        <!-- What's new -->
        <MenuItem Header="What's new" Command="{Binding Source={x:Static pmdm:WhatIsNewM.OpenCommand}}"/>

        <!-- About -->
        <MenuItem Header="About" Command="{Binding MainWindowM.OpenAboutCommand}"/>
      </MenuItem>
    </Menu>
  </DataTemplate>
</ResourceDictionary>