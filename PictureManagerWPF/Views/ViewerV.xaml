<ResourceDictionary
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:vm="clr-namespace:PictureManager.ViewModels"
  xmlns:models="clr-namespace:PictureManager.Domain.Models;assembly=PictureManager.Domain"
  xmlns:rd="clr-namespace:PictureManager.ResourceDictionaries">

  <!-- ViewerM DataTemplate -->
  <DataTemplate DataType="{x:Type vm:ViewerVM}">
    <DataTemplate.Resources>
      <Style TargetType="{x:Type Border}">
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush" Value="Black"/>
        <Setter Property="Margin" Value="2"/>
        <Setter Property="MinWidth" Value="210"/>
        <Setter Property="MinHeight" Value="210"/>
      </Style>

      <Style x:Key="_header" TargetType="{x:Type StackPanel}">
        <Setter Property="Orientation" Value="Horizontal"/>
        <Setter Property="Background" Value="#88000000"/>
      </Style>

      <Style x:Key="_headerIcon" TargetType="{x:Type Path}" BasedOn="{StaticResource MH.Styles.Icon}">
        <Setter Property="Margin" Value="6,0,0,0"/>
      </Style>

      <Style x:Key="_headerText" TargetType="{x:Type TextBlock}">
        <Setter Property="FontSize" Value="20"/>
        <Setter Property="Padding" Value="8"/>
        <Setter Property="HorizontalAlignment" Value="Center"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
      </Style>

      <!-- FolderM DataTemplate -->
      <DataTemplate DataType="{x:Type models:FolderM}">
        <StackPanel Orientation="Horizontal">
          <Path
            Style="{StaticResource MH.Styles.Icon}"
            Data="{Binding IconName,
                   Converter={StaticResource ResourceConverter},
                   FallbackValue={StaticResource IconFolder}}"
            Fill="{Binding IconName,
                   Converter={StaticResource ResourceConverter},
                   ConverterParameter={x:Static rd:Dictionaries.IconNameToBrush}}"
            HorizontalAlignment="Center"/>

          <TextBlock
            Text="{Binding Name}"
            Margin="5,0"
            FontSize="14"/>
        </StackPanel>
      </DataTemplate>

      <!-- CategoryGroupM DataTemplate -->
      <DataTemplate DataType="{x:Type models:CategoryGroupM}">
        <StackPanel Orientation="Horizontal" Background="Transparent">
          <Path
            Style="{StaticResource MH.Styles.Icon}"
            Data="{Binding IconName,
                   Converter={StaticResource ResourceConverter}}"
            Fill="{Binding IconName,
                   Converter={StaticResource ResourceConverter},
                   ConverterParameter={x:Static rd:Dictionaries.IconNameToBrush}}"/>

          <TextBlock
            Text="{Binding Name}"
            Margin="5,0"
            FontSize="14"/>
        </StackPanel>
      </DataTemplate>

      <!-- KeywordM DataTemplate -->
      <DataTemplate DataType="{x:Type models:KeywordM}">
        <StackPanel Orientation="Horizontal">
          <Path
            Style="{StaticResource MH.Styles.Icon}"
            Data="{StaticResource IconTag}"
            Fill="{StaticResource ColorBrushTag}"/>

          <TextBlock
            Text="{Binding Name}"
            Margin="5,0"
            FontSize="14"/>
        </StackPanel>
      </DataTemplate>
    </DataTemplate.Resources>

    <WrapPanel>
      <!-- Included Folders -->
      <Border>
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>

          <StackPanel Style="{StaticResource _header}">
            <Path
              Data="{StaticResource IconFolder}"
              Fill="{StaticResource ColorBrushFolder}"
              Style="{StaticResource _headerIcon}"/>

            <TextBlock
              Style="{StaticResource _headerText}"
              Text="Included Folders"/>
          </StackPanel>

          <ContentPresenter
            Content="{Binding LbIncludedFolders}"
            Grid.Row="1">

            <ContentPresenter.Resources>
              <Style TargetType="{x:Type ListBox}" BasedOn="{StaticResource {x:Type ListBox}}">
                <Setter Property="ItemsSource" Value="{Binding Viewer.IncludedFolders}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="ItemContainerStyle">
                  <Setter.Value>
                    <Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource {x:Type ListBoxItem}}">
                      <Setter Property="ToolTip" Value="{Binding Path=(models:FolderM.FullPath)}"/>
                    </Style>
                  </Setter.Value>
                </Setter>
              </Style>
            </ContentPresenter.Resources>
          </ContentPresenter>
        </Grid>
      </Border>

      <!-- Excluded Folders -->
      <Border>
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>

          <StackPanel Style="{StaticResource _header}">
            <Path
              Data="{StaticResource IconFolder}"
              Fill="{StaticResource ColorBrushFolder}"
              Style="{StaticResource _headerIcon}"/>

            <TextBlock
              Style="{StaticResource _headerText}"
              Text="Excluded Folders"/>
          </StackPanel>

          <ContentPresenter Grid.Row="1" Content="{Binding LbExcludedFolders}">
            <ContentPresenter.Resources>
              <Style TargetType="{x:Type ListBox}" BasedOn="{StaticResource {x:Type ListBox}}">
                <Setter Property="ItemsSource" Value="{Binding Viewer.ExcludedFolders}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="ItemContainerStyle">
                  <Setter.Value>
                    <Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource {x:Type ListBoxItem}}">
                      <Setter Property="ToolTip" Value="{Binding Path=(models:FolderM.FullPath)}"/>
                    </Style>
                  </Setter.Value>
                </Setter>
              </Style>
            </ContentPresenter.Resources>
          </ContentPresenter>
        </Grid>
      </Border>

      <!-- Category Groups -->
      <Border>
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>

          <StackPanel Style="{StaticResource _header}">
            <Path
              Data="{StaticResource IconGroup}"
              Fill="{StaticResource ColorBrushWhite}"
              Style="{StaticResource _headerIcon}"/>

            <TextBlock
              Style="{StaticResource _headerText}"
              Text="Category Groups"/>
          </StackPanel>

          <ListBox
            Grid.Row="1"
            ItemsSource="{Binding CategoryGroups}"
            SelectionMode="Multiple"
            BorderThickness="0">

            <ListBox.ItemTemplate>
              <DataTemplate>
                <ContentPresenter Content="{Binding Content}">
                  <ContentPresenter.InputBindings>
                    <MouseBinding
                      MouseAction="LeftClick"
                      Command="{Binding DataContext.CategoryGroupsSelectCommand,
                                RelativeSource={RelativeSource AncestorType={x:Type ListBox}}}"
                      CommandParameter="{Binding DataContext,
                                         RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}}"/>
                  </ContentPresenter.InputBindings>
                </ContentPresenter>
              </DataTemplate>
            </ListBox.ItemTemplate>

            <ListBox.ItemContainerStyle>
              <Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource {x:Type ListBoxItem}}">
                <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
              </Style>
            </ListBox.ItemContainerStyle>
          </ListBox>
        </Grid>
      </Border>

      <!-- Excluded Keywords -->
      <Border>
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>

          <StackPanel Style="{StaticResource _header}">
            <Path
              Data="{StaticResource IconTagLabel}"
              Fill="{StaticResource ColorBrushTag}"
              Style="{StaticResource _headerIcon}"/>

            <TextBlock Style="{StaticResource _headerText}" Text="Excluded Keywords"/>
          </StackPanel>

          <ContentPresenter Grid.Row="1" Content="{Binding LbExcludedKeywords}">
            <ContentPresenter.Resources>
              <Style TargetType="{x:Type ListBox}" BasedOn="{StaticResource {x:Type ListBox}}">
                <Setter Property="ItemsSource" Value="{Binding Viewer.ExcludedKeywords}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="ItemContainerStyle">
                  <Setter.Value>
                    <Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource {x:Type ListBoxItem}}">
                      <Setter Property="ToolTip" Value="{Binding Path=(models:KeywordM.FullName)}"/>
                    </Style>
                  </Setter.Value>
                </Setter>
              </Style>
            </ContentPresenter.Resources>
          </ContentPresenter>
        </Grid>
      </Border>
    </WrapPanel>
  </DataTemplate>
</ResourceDictionary>