<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:pm="clr-namespace:PictureManager"
                    xmlns:uc="clr-namespace:PictureManager.UserControls"
                    xmlns:pmd="clr-namespace:PictureManager.Domain;assembly=PictureManager.Domain"
                    xmlns:mhc="clr-namespace:MH.UI.WPF.Controls;assembly=MH.UI.WPF"
                    xmlns:vm="clr-namespace:PictureManager.ViewModels"
                    xmlns:b="http://schemas.microsoft.com/xaml/behaviors">

<DataTemplate x:Key="StatusPanel"
              DataType="{x:Type vm:StatusPanelVM}">
  <Grid VerticalAlignment="Top"
        Background="#88000000">

    <Grid.Style>
      <Style TargetType="{x:Type Grid}">
        <Setter Property="Opacity" Value="0" />
        <Setter Property="Visibility" Value="Visible" />

        <Style.Triggers>
          <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
              <Condition Binding="{Binding ThumbnailsGridsM.Current,
                                   Source={x:Static pm:App.Core},
                                   Converter={StaticResource AllToBoolConverter}}"
                         Value="False" />
              <Condition Binding="{Binding AppInfo.AppMode, Source={x:Static pm:App.Ui}}"
                         Value="{x:Static pm:AppMode.Browser}"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Visibility" Value="Collapsed" />
          </MultiDataTrigger>

          <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Opacity" Value="1" />
          </Trigger>

          <DataTrigger Binding="{Binding IsPinned}"
                       Value="True">
            <Setter Property="Opacity" Value="1" />
          </DataTrigger>
        </Style.Triggers>
      </Style>
    </Grid.Style>

    <b:Interaction.Triggers>
      <b:EventTrigger EventName="PreviewMouseLeftButtonUp">
        <b:InvokeCommandAction Command="{Binding PinCommand}" />
      </b:EventTrigger>
    </b:Interaction.Triggers>

    <WrapPanel VerticalAlignment="Bottom"
               Margin="0,2,0,1">

      <WrapPanel.Resources>
        <Style TargetType="Border" BasedOn="{StaticResource SBorderGroup}" />
        <Style TargetType="TextBlock" BasedOn="{StaticResource STextBlock}" />
      </WrapPanel.Resources>

      <!-- PositionSlashCount / Selected / Modified -->
      <Border Style="{StaticResource SBorderGroup}"
              DataContext="{x:Static pm:App.Core}">
        <StackPanel Orientation="Horizontal">
          <!-- Icon -->
          <mhc:Icon Source="{StaticResource IconImageMultiple}" />

          <!-- PositionSlashCount -->
          <Border>
            <TextBlock>
              <TextBlock.Style>
                <Style TargetType="{x:Type TextBlock}"
                       BasedOn="{StaticResource STextBlock}">
                  <Setter Property="Text"
                          Value="{Binding ThumbnailsGridsM.Current.PositionSlashCount}" />
                  <Style.Triggers>
                    <DataTrigger Binding="{Binding AppInfo.AppMode, Source={x:Static pm:App.Ui}}"
                                 Value="{x:Static pm:AppMode.Viewer}">
                      <Setter Property="Text"
                              Value="{Binding MediaViewer.PositionSlashCount, Source={x:Static pm:App.WMain}}" />
                    </DataTrigger>
                  </Style.Triggers>
                </Style>
              </TextBlock.Style>
            </TextBlock>
          </Border>

          <!-- Selected -->
          <Border Background="#1181B1"
                  Visibility="{Binding AppInfo.AppMode, Source={x:Static pm:App.Ui},
                               Converter={StaticResource AllToVisibilityConverter}, 
                               ConverterParameter={x:Static pm:AppMode.Browser}}">
            <TextBlock Text="{Binding ThumbnailsGridsM.Current.SelectedCount}" />
          </Border>

          <!-- Modified -->
          <Border Background="#CA5100" 
                  Visibility="{Binding MediaItemsM.IsEditModeOn,
                               Converter={StaticResource AllToVisibilityConverter}}">
            <TextBlock Text="{Binding MediaItemsM.ModifiedItemsCount}" />
          </Border>
        </StackPanel>
      </Border>

      <!-- Dimension -->
      <uc:InfoPanel Visibility="{Binding CurrentMediaItemM,
                                 Converter={StaticResource AllToVisibilityConverter}}"
                    IconSource="{StaticResource IconRuler}"
                    IconFill="{StaticResource ColorBrushWhite}"
                    Item="{Binding CurrentMediaItemM.Dimensions}" />

      <!-- File Size -->
      <uc:InfoPanel DataContext="{x:Static pm:App.Core}"
                    Visibility="{Binding ThumbnailsGridsM.Current.ActiveFileSize,
                                 Converter={StaticResource AllToVisibilityConverter}}"
                    IconSource="{StaticResource IconPageUpload}"
                    IconFill="{StaticResource ColorBrushWhite}"
                    Item="{Binding ThumbnailsGridsM.Current.ActiveFileSize}" />

      <!-- ImageActualZoom -->
      <uc:InfoPanel IconSource="{StaticResource IconMagnify}"
                    IconFill="{StaticResource ColorBrushWhite}"
                    Item="{Binding ZoomActualFormatted}">
        <uc:InfoPanel.Style>
          <Style TargetType="{x:Type uc:InfoPanel}">
            <Setter Property="Visibility" Value="Collapsed" />
            <Style.Triggers>
              <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                  <Condition Binding="{Binding AppInfo.AppMode, Source={x:Static pm:App.Ui}}"
                             Value="{x:Static pm:AppMode.Viewer}" />
                  <Condition Binding="{Binding CurrentMediaItemM.MediaType}"
                             Value="{x:Static pmd:MediaType.Image}" />
                </MultiDataTrigger.Conditions>
                <Setter Property="Visibility" Value="Visible" />
              </MultiDataTrigger>
            </Style.Triggers>
          </Style>
        </uc:InfoPanel.Style>
      </uc:InfoPanel>

      <!-- Rating -->
      <Border Style="{StaticResource SBorderGroup}"
              Visibility="{Binding Rating.Count,
                           Converter={StaticResource AllToVisibilityConverter}}">
        <Border Margin="0">
          <ItemsControl ItemsSource="{Binding Rating}">
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" />
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <mhc:Icon Source="{StaticResource IconStar}" />
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>
        </Border>
      </Border>

      <!-- GeoName -->
      <Border ToolTip="{Binding CurrentMediaItemM.GeoName.FullName}"
              Margin="2,2,0,0">
        <Border.Style>
          <Style TargetType="Border" BasedOn="{StaticResource SBorderGroup}">
            <Setter Property="Visibility" Value="Collapsed" />
            <Style.Triggers>
              <DataTrigger Binding="{Binding CurrentMediaItemM.GeoName,
                                     Converter={StaticResource AllToBoolConverter}}"
                           Value="True">
                <Setter Property="Visibility" Value="Visible" />
              </DataTrigger>
            </Style.Triggers>
          </Style>
        </Border.Style>
        <mhc:Icon Source="{StaticResource IconLocationCheckin}" />
      </Border>

      <!-- FilePath -->
      <uc:InfoPanel Visibility="{Binding FilePath,
                                 Converter={StaticResource AllToVisibilityConverter}}"
                    ToolTip="{Binding CurrentMediaItemM.FilePath}"
                    IconSource="{StaticResource IconFolder}"
                    IconFill="{StaticResource ColorBrushFolder}"
                    Items="{Binding FilePath}" />

      <!-- DateAndTime -->
      <uc:InfoPanel Visibility="{Binding DateAndTime,
                                 Converter={StaticResource AllToVisibilityConverter}}"
                    IconSource="{StaticResource IconCalendar}"
                    IconFill="{StaticResource ColorBrushWhite}"
                    Item="{Binding DateAndTime}" />

      <!-- People -->
      <uc:InfoPanel IconSource="{StaticResource IconPeople}"
                    IconFill="{StaticResource ColorBrushPeople}"
                    Items="{Binding CurrentMediaItemM.InfoBoxPeople}">
        <uc:InfoPanel.Style>
          <Style TargetType="{x:Type uc:InfoPanel}">
            <Setter Property="Visibility" Value="Collapsed" />
            <Style.Triggers>
              <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                  <Condition Binding="{Binding AppInfo.AppMode, Source={x:Static pm:App.Ui}}"
                             Value="{x:Static pm:AppMode.Viewer}" />
                  <Condition Binding="{Binding CurrentMediaItemM.InfoBoxPeople,
                                       Converter={StaticResource AllToBoolConverter}}"
                             Value="True" />
                </MultiDataTrigger.Conditions>
                <Setter Property="Visibility" Value="Visible" />
              </MultiDataTrigger>
            </Style.Triggers>
          </Style>
        </uc:InfoPanel.Style>
      </uc:InfoPanel>

      <!-- Keywords -->
      <uc:InfoPanel IconSource="{StaticResource IconTag}"
                    IconFill="{StaticResource ColorBrushTag}"
                    Items="{Binding CurrentMediaItemM.InfoBoxKeywords}">
        <uc:InfoPanel.Style>
          <Style TargetType="{x:Type uc:InfoPanel}">
            <Setter Property="Visibility" Value="Collapsed" />
            <Style.Triggers>
              <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                  <Condition Binding="{Binding AppInfo.AppMode, Source={x:Static pm:App.Ui}}"
                             Value="{x:Static pm:AppMode.Viewer}" />
                  <Condition Binding="{Binding CurrentMediaItemM.InfoBoxKeywords, 
                                       Converter={StaticResource AllToBoolConverter}}"
                             Value="True" />
                </MultiDataTrigger.Conditions>
                <Setter Property="Visibility" Value="Visible" />
              </MultiDataTrigger>
            </Style.Triggers>
          </Style>
        </uc:InfoPanel.Style>
      </uc:InfoPanel>

      <!-- Comment -->
      <uc:InfoPanel IconSource="{StaticResource IconNotification}"
                    IconFill="{StaticResource ColorBrushWhite}"
                    Item="{Binding CurrentMediaItemM.Comment}">
        <uc:InfoPanel.Style>
          <Style TargetType="{x:Type uc:InfoPanel}">
            <Setter Property="Visibility" Value="Collapsed" />
            <Style.Triggers>
              <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                  <Condition Binding="{Binding AppInfo.AppMode, Source={x:Static pm:App.Ui}}"
                             Value="{x:Static pm:AppMode.Viewer}" />
                  <Condition Binding="{Binding CurrentMediaItemM.Comment, 
                                       Converter={StaticResource AllToBoolConverter}}"
                             Value="True" />
                </MultiDataTrigger.Conditions>
                <Setter Property="Visibility" Value="Visible" />
              </MultiDataTrigger>
            </Style.Triggers>
          </Style>
        </uc:InfoPanel.Style>
      </uc:InfoPanel>

    </WrapPanel>
  </Grid>
</DataTemplate>



</ResourceDictionary>