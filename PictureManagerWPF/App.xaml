<Application x:Class="PictureManager.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:pm="clr-namespace:PictureManager"
             Startup="App_Startup">
  <Application.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colors.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/blue.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/basedark.xaml" />
        <ResourceDictionary Source="/Resources/Icons.xaml" />
      </ResourceDictionary.MergedDictionaries>
      
      <pm:StaticResourceConverter x:Key="StaticResourceConverter"/>
      <pm:IconNameToBrush x:Key="IconNameToBrush" />
      <pm:IconNameToStaticResourceConverter x:Key="IconNameToStaticResourceConverter" />
      <pm:RatingConverter x:Key="RatingConverter" />
      <pm:BackgroundColorConverter x:Key="BgColorConverter" />
      <pm:DataBindingDebugConverter x:Key="DebugConverter" />
      <pm:ImageSourceConverter x:Key="ImageSourceConverter" />
      <pm:MediaItemSizeConverter x:Key="MediaItemSizeConverter" />
      <pm:IconSymbolConverter x:Key="IconSymbolConverter" />
      <pm:AllToVisibilityConverter x:Key="AllToVisibilityConverter" />
      <pm:TypeToStyleConverter x:Key="TypeToStyleConverter" />

      <Style x:Key="RootMenuStyle" TargetType="MenuItem">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Padding" Value="5" />
        <Style.Triggers>
          <Trigger Property="MenuItem.IsMouseOver" Value="True">
            <Setter Property="MenuItem.Background" Value="{DynamicResource WhiteBrush}" />
          </Trigger>
        </Style.Triggers>
      </Style>

      <!-- IconRect -->
      <Style x:Key="IconRect" TargetType="Rectangle">
        <Setter Property="Width" Value="18" />
        <Setter Property="Height" Value="18" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="Fill" Value="{Binding IconName, Converter={StaticResource IconNameToBrush}}" />
        <Setter Property="OpacityMask">
          <Setter.Value>
            <VisualBrush Stretch="Uniform" Visual="{Binding IconName, Converter={StaticResource IconNameToStaticResourceConverter}}" />
          </Setter.Value>
        </Setter>
      </Style>

      <!-- IconRect2 -->
      <Style x:Key="IconRect2" TargetType="Rectangle">
        <Setter Property="Width" Value="18" />
        <Setter Property="Height" Value="18" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="DataContext" Value="{Binding RelativeSource={RelativeSource Self}}" />
        <Setter Property="Fill" Value="{Binding Tag, Converter={StaticResource IconNameToBrush}}" />
        <Setter Property="OpacityMask">
          <Setter.Value>
            <VisualBrush Stretch="Uniform" Visual="{Binding Tag, Converter={StaticResource IconNameToStaticResourceConverter}}" />
          </Setter.Value>
        </Setter>
      </Style>

      <!-- IconSymbol -->
      <Style x:Key="IconSymbol" TargetType="TextBlock">
        <Setter Property="FontFamily" Value="Segoe UI Symbol" />
        <Setter Property="FontSize" Value="18" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="Margin" Value="0,0,2,0" />
        <Setter Property="Text" Value="{Binding IconName, Converter={StaticResource IconSymbolConverter}}" />
      </Style>

      <!-- TreeViewTitle -->
      <Style x:Key="TreeViewTitle" TargetType="TextBlock">
        <Setter Property="Text" Value="{Binding Title}" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="Margin" Value="5,0,0,0" />
      </Style>

      <Rectangle x:Key="MenuItemIconRect" x:Shared="False" Width="18" Height="18" VerticalAlignment="Center" Fill="{DynamicResource BlackBrush}">
        <Rectangle.OpacityMask>
          <VisualBrush Stretch="Uniform" Visual="{Binding Tag, RelativeSource={RelativeSource AncestorType=MenuItem},
                                                  Converter={StaticResource IconNameToStaticResourceConverter}}" />
        </Rectangle.OpacityMask>
      </Rectangle>

      <Style x:Key="MenuItemIcon" TargetType="MenuItem" BasedOn="{StaticResource {x:Type MenuItem}}">
        <Setter Property="Icon" Value="{StaticResource MenuItemIconRect}"/>
      </Style>
      
      <!-- DialogButtons -->
      <Style x:Key="DialogButtons" TargetType="StackPanel">
        <Setter Property="Orientation" Value="Horizontal" />
        <Setter Property="HorizontalAlignment" Value="Right" />
        <Setter Property="Margin" Value="5" />
      </Style>

      <!-- DialogButton -->
      <Style x:Key="DialogButton" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
        <Setter Property="MinWidth" Value="60" />
        <Setter Property="Margin" Value="5" />
      </Style>

    </ResourceDictionary>
    
  </Application.Resources>
</Application>
