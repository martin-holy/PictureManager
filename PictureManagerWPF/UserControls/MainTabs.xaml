<UserControl x:Class="PictureManager.UserControls.MainTabs"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:pm="clr-namespace:PictureManager">

  <TabControl x:Name="Tabs" Background="Transparent" BorderThickness="0" TabStripPlacement="Left" SizeChanged="OnSizeChanged"
              Visibility="{Binding AppInfo.AppMode, Source={x:Static pm:App.Ui},
                           Converter={StaticResource AllToVisibilityConverter}, 
                           ConverterParameter={x:Static pm:AppMode.Browser}}">

    <TabControl.Resources>
      <Style TargetType="{x:Type TabItem}" BasedOn="{StaticResource MetroTabItem}">
        <Setter Property="HeaderTemplate">
          <Setter.Value>
            <DataTemplate>
              <StackPanel Orientation="Vertical" ToolTip="{Binding}">
                <Button Style="{StaticResource StyleButtonFontSymbol}" Content="✚" Click="BtnAddTab_Click" 
                        Visibility="{Binding Tag, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TabItem}}, 
                                                  Converter={StaticResource AllToVisibilityConverter}}" />
                <Button Style="{StaticResource StyleButtonFontSymbol}" Content="✖" Click="BtnCloseTab_Click" />
                <TextBlock Text="{Binding}" Margin="0,8">
                  <TextBlock.LayoutTransform>
                    <RotateTransform Angle="270" />
                  </TextBlock.LayoutTransform>
                </TextBlock>
              </StackPanel>
            </DataTemplate>
          </Setter.Value>
        </Setter>
      </Style>
    </TabControl.Resources>

  </TabControl>
</UserControl>
