<UserControl x:Class="PictureManager.UserControls.SegmentsDrawerControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:cc="clr-namespace:PictureManager.CustomControls"
             xmlns:pm="clr-namespace:PictureManager">
  
    <ItemsControl x:Name="SegmentsGrid" Margin="2,0,0,0"
                  ItemsSource="{Binding Segments.SegmentsDrawer, Source={x:Static pm:App.Core}}">
      <ItemsControl.Template>
        <ControlTemplate>
          <ScrollViewer>
            <ItemsPresenter />
          </ScrollViewer>
        </ControlTemplate>
      </ItemsControl.Template>
      
      <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
          <WrapPanel />
        </ItemsPanelTemplate>
      </ItemsControl.ItemsPanel>
      
      <ItemsControl.ItemTemplate>
        <DataTemplate>
          <cc:SegmentControl DataContext="{Binding}" Selected="OnSegmentSelected" />
        </DataTemplate>
      </ItemsControl.ItemTemplate>
    </ItemsControl>
</UserControl>